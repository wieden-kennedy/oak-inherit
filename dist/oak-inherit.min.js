"use strict";!function(){var t=!1,n=window.inherit=function(n,i,o){var e,r=function(){i.apply(this),t===!1&&"function"==typeof this._init&&this._init.apply(this,arguments)};return n&&(t=!0,e=r.prototype=new n,t=!1),r.prototype.constructor=r,"object"==typeof o&&e&&oak.extend(e,o),r};Function.prototype.inherit=function(t,i){return n(t,this,i)}}();
"use strict";oak.Base=function(){}.inherit(),oak.extend(oak.Base.prototype,{_defaults:{},_init:function(t){t=t||{};var e;for(e in this._defaults)this[e]="undefined"==typeof t[e]?this._defaults[e]:t[e]},defaults:function(t){var e,i={};if("undefined"!=typeof this._defaults)for(e in this._defaults)i[e]=this._defaults[e];for(e in t)i[e]=t[e];this._defaults=i}});
"use strict";oak.Evented=function(){}.inherit(oak.Base),oak.extend(oak.Evented.prototype,{_init:function(e){oak.Base.prototype._init.call(this,e),this._events={},this._observers={}},addObserver:function(e,t,s,n){n=n||this;var i=function(){s.apply(n,oak._arrProto.slice.call(arguments,0))};this._observers[t]=this._observers[t]||[],this._observers[t].push({target:e,type:t,listener:s,scope:n,handler:i}),e.addEventListener(t,i,!1)},removeObserver:function(e,t,s,n){if(n=n||this,"undefined"!=typeof this._observers[t])for(var i,r=this._observers[t].length;r--;)i=this._observers[t][r],i.target===e&&i.type===t&&i.listener===s&&i.scope===n&&e.removeEventListener(t,i.handler)},on:function(e,t,s){if(!oak.defined(e,t))return this;s=s||null,this._events=this._events||{};var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,scope:s}),this},off:function(e,t){if(!oak.defined(e,this._events)||"undefined"==typeof this._events[e])return this;var s=this;return oak.defined(t)&&oak.each(this._events[e],function(n,i){n.callback===t&&s._events[e].splice(i,1)}),("undefined"==typeof t||0===this._events[e].length)&&delete this._events[e],this},once:function(e,t){if(!oak.defined(e,t))return this;var s=function(){var n=n||this;t.apply(n,arguments),this.off(e,s)};return this.on(e,s)},trigger:function(e){if("string"!=typeof e||"object"!=typeof this._events||"undefined"==typeof this._events[e])return this;var t,s=this,n=oak._arrProto.slice.call(arguments,1);return oak.each(this._events[e],function(e){t=e.scope||s,e.callback.apply(t,n)}),this}});
"use strict";oak.Statable=function(){}.inherit(oak.Evented,{states:{},setState:function(t){var e,r,n,i,a=oak._arrProto.slice.call(arguments,1),s=t;("undefined"==typeof this.currentState||s!==this.currentState)&&(n=this.states["on"+s.replace(/^\w/,function(t){return t.toUpperCase()})],i="on:"+s,"undefined"!=typeof this.currentState&&(e=this.states["off"+this.currentState.replace(/^\w/,function(t){return t.toUpperCase()})],r="off:"+this.currentState),this.currentState=s,"undefined"!=typeof e&&(e.apply(this),this.trigger(r,a)),"undefined"!=typeof n&&(n.apply(this,a),this.trigger(i,a)))}});